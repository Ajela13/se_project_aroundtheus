!function(){"use strict";class t{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=e}_hideInputError(t){this._errorElement=this._formElement.querySelector(`.${t.id}-error`),t.classList.remove(this._inputErrorClass),this._errorElement.textContent=" ",this._errorElement.classList.remove(this._errorClass)}_showInputError(t,e){this._errorElement=this._formElement.querySelector(`.${t.id}-error`),t.classList.add(this._inputErrorClass),this._errorElement.textContent=e,this._errorElement.classList.add(this._errorClass)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_hasInvalidInput(t){return t.some((t=>!t.validity.valid))}_disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_enableButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(t){this._hasInvalidInput(t)?this._disableButton(this._buttonElement):this._enableButton(this._buttonElement)}_setEventListener(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(this._inputList),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState(this._inputList)}))}))}enableValidation(){this._formElement.addEventListener("submit",(t=>{t.preventDefault(),this._formElement.reset(),this._disableButton()})),this._setEventListener()}}class e{constructor(t,e,s){this._data=t,this._name=t.name,this._link=t.link,this._alt=t.alt,this._cardSelector=document.querySelector(e).content.firstElementChild,this._handleImageClick=s,this._cardElement=this._cardSelector.cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardNameEl=this._cardElement.querySelector(".card__description-name"),this._deleteButton=this._cardElement.querySelector(".card__trash"),this._likeButton=this._cardElement.querySelector(".card__like-button")}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this._data)})),this._deleteButton.addEventListener("click",(()=>this._handleDeleteButton(this))),this._likeButton.addEventListener("click",(()=>this._handleLikeButton(this)))}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}getCardElement(){return this._cardImageElement.src=this._link,this._cardNameEl.textContent=this._name,this._cardImageElement.alt=this._alt,this._setEventListeners(),this._cardElement}}class s{constructor(t){this._modal=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._modal.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modal.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._modal.addEventListener("click",(t=>{t.target.classList.contains("modal__close")&&this.close(),t.target.classList.contains("modal")&&this.close()}))}}class i extends s{constructor(t,e){super(t),this._modalForm=this._modal.querySelector(".modal__form"),this._handleFormSubmit=e,this._inputList=this._modalForm.querySelectorAll(".form__input")}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._modalForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}const n=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-title"),o=document.querySelector("#profile-edit-description"),a=document.querySelector("#profile-add-button"),l=document.forms["modal-add-form"],c=new class{constructor(t,e){this._profileTitleElement=document.querySelector(t),this._profileDescriptionElement=document.querySelector(e)}getUserInfo(){return{title:this._profileTitleElement.textContent,description:this._profileDescriptionElement.textContent.trim()}}setUserInfo(t){let{title:e,description:s}=t;this._profileTitleElement.textContent=e,this._profileDescriptionElement.textContent=s}}("#profile-title","#profile-description"),m=new i("#profile-add-modal",(function(t){p({name:t.title,link:t["Image-link"]}),l.reset()})),d=new i("#profile-edit-modal",(function(t){c.setUserInfo(t)})),_=new class extends s{constructor(t){super(t),this._previewImage=this._modal.querySelector(".modal__image"),this._previewImageDescription=this._modal.querySelector(".preview_modal_description")}open(t){this._previewImage.src=t.link,this._previewImageDescription.textContent=t.name,this._previewImage.alt=t.alt,super.open()}}("#preview_image_modal"),u=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>this._renderer(t)))}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite picture"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake picture"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald picture"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar picture"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Vanoise picture"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"Lago picture"}],renderer:p},".cards__list");function h(t){_.open(t)}function p(t){const s=new e(t,"#card-template",h).getCardElement();u.addItem(s)}u.renderItems(),n.addEventListener("click",(()=>{const t=c.getUserInfo();r.value=t.title,o.value=t.description,d.open()})),d.setEventListeners(),a.addEventListener("click",(()=>m.open())),m.setEventListeners(),_.setEventListeners();const E={};var f;f={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},Array.from(document.querySelectorAll(f.formSelector)).forEach((e=>{const s=new t(f,e),i=e.getAttribute("name");E[i]=s,s.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVksSUFBSTdJLEVBQWNFLEVBQVFDLEdBQ3RDMkksRUFBVzNJLEVBQVk0SSxhQUFhLFFBRTFDSixFQUFlRyxHQUFZRCxFQUMzQkEsRUFBVS9GLGtCQUFrQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiIFwiO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0KTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fYWx0ID0gZGF0YS5hbHQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3RvcikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9jYXJkU2VsZWN0b3IuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkTmFtZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVzY3JpcHRpb24tbmFtZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24odGhpcylcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbih0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkTmFtZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fYWx0O1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9tb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKG1vZGFsU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICAgIGFsdDogXCJZb3NlbWl0ZSBwaWN0dXJlXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICBhbHQ6IFwiTGFrZSBwaWN0dXJlXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICBhbHQ6IFwiQmFsZCBwaWN0dXJlXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkxhdGVtYXIgcGljdHVyZVwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlZhbm9pc2UgcGljdHVyZVwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgICBhbHQ6IFwiTGFnbyBwaWN0dXJlXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIEVsZW1lbnRzXHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWVkaXQtZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcIm1vZGFsLWFkZC1mb3JtXCJdO1xyXG5cclxuLy8gVmFsaWRhdGlvblxyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgcHJvZmlsZUFkZEJ1dHRvbixcclxuICBwcm9maWxlQWRkRm9ybSxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IHVzZXJJbmZvQ2xhc3MgPSBuZXcgVXNlckluZm8oXCIjcHJvZmlsZS10aXRsZVwiLCBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkTW9kYWxDbGFzcyA9IG5ldyBNb2RhbFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcclxuKTtcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbENsYXNzID0gbmV3IE1vZGFsV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsQ2xhc3MgPSBuZXcgTW9kYWxXaXRoSW1hZ2UoXCIjcHJldmlld19pbWFnZV9tb2RhbFwiKTtcclxuXHJcbi8vIEZ1bmN0aW9uc1xyXG5cclxuY29uc3Qgc2VjdGlvbkNsYXNzID0gbmV3IFNlY3Rpb24oXHJcbiAgeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuc2VjdGlvbkNsYXNzLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xyXG4gIHVzZXJJbmZvQ2xhc3Muc2V0VXNlckluZm8oZm9ybURhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XHJcbiAgcHJldmlld0ltYWdlTW9kYWxDbGFzcy5vcGVuKGNhcmREYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRDYXJkRWxlbWVudCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICBzZWN0aW9uQ2xhc3MuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KG9iaikge1xyXG4gIGNvbnN0IG5hbWUgPSBvYmpbXCJ0aXRsZVwiXTtcclxuICBjb25zdCBsaW5rID0gb2JqW1wiSW1hZ2UtbGlua1wiXTtcclxuICByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9KTtcclxuICBwcm9maWxlQWRkRm9ybS5yZXNldCgpO1xyXG59XHJcblxyXG4vLyBFdmVudCBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mb0NsYXNzLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS50aXRsZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xyXG4gIHByb2ZpbGVFZGl0TW9kYWxDbGFzcy5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRNb2RhbENsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBwcm9maWxlQWRkTW9kYWxDbGFzcy5vcGVuKCkpO1xyXG5cclxucHJvZmlsZUFkZE1vZGFsQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByZXZpZXdJbWFnZU1vZGFsQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlVGl0bGVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVUaXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVUaXRsZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGl0bGU6IHRoaXMuX3Byb2ZpbGVUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LnRyaW0oKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoSW1hZ2UgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZURlc2NyaXB0aW9uID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucHJldmlld19tb2RhbF9kZXNjcmlwdGlvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkRGF0YSkge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gY2FyZERhdGEuYWx0O1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9lcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsImFkZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsIl9kaXNhYmxlQnV0dG9uIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9kYXRhIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2FsdCIsImFsdCIsIl9jYXJkU2VsZWN0b3IiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJfY2FyZE5hbWVFbCIsIl9kZWxldGVCdXR0b24iLCJfbGlrZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsImdldENhcmRFbGVtZW50Iiwic3JjIiwiTW9kYWwiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiTW9kYWxXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9tb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVBZGRGb3JtIiwiZm9ybXMiLCJ1c2VySW5mb0NsYXNzIiwicHJvZmlsZVRpdGxlU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9wcm9maWxlVGl0bGVFbGVtZW50IiwiX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0cmltIiwic2V0VXNlckluZm8iLCJfcmVmIiwicHJvZmlsZUFkZE1vZGFsQ2xhc3MiLCJvYmoiLCJyZW5kZXJDYXJkIiwicHJvZmlsZUVkaXRNb2RhbENsYXNzIiwiZm9ybURhdGEiLCJwcmV2aWV3SW1hZ2VNb2RhbENsYXNzIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3SW1hZ2VEZXNjcmlwdGlvbiIsImNhcmREYXRhIiwic2VjdGlvbkNsYXNzIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmRFbGVtZW50IiwidXNlckRhdGEiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==